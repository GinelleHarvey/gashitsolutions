<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A7 — Drag & Drop (Cards)</title>
  <meta name="description" content="Assignment 7: HTML5 drag-and-drop with cards, foundations, tableau, and utility stacks.">
  <link rel="stylesheet" href="style.css">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="assets/favicon-48x48.png">
  <link rel="icon" type="image/png" sizes="64x64" href="assets/favicon-64x64.png">
  <link rel="icon" type="image/png" sizes="128x128" href="assets/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="512x512" href="assets/favicon-512.png">
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">

  <!-- ===== A7 (scoped to the game only) ===== -->
  <style>
    /* Tighter footprint so 7 slots fit comfortably */
    #a7{
      --slot-w: 160px;     /* column width */
      --slot-h: 220px;     /* min slot height */
      --card-w: 132px;     /* card 3:4 */
      --card-h: 176px;
      --slot-dash: #9ea3ff80;
      --anim: 1;           /* 1 = on, 0 = off (toggle) */
    }

    .page-banner .wrap { text-align:center; }

    #a7 .game-area{
      background: var(--surface);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:14px;
    }

    /* controls */
    #a7 .control-bar{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:0 0 10px }
    #a7 .control-bar button{
      background: var(--surface-2); color: var(--text);
      border:1px solid var(--border); padding:6px 10px;
      border-radius:10px; font-weight:800; cursor:pointer;
    }
    #a7 .control-bar button:hover{ filter:brightness(1.08) }
    #a7 .control-bar .toggle{
      display:inline-flex; align-items:center; gap:6px; font-weight:700; opacity:.9;
    }

    /* instructions */
    #a7 .help{
      background: var(--surface-2);
      border:1px solid var(--border);
      border-radius:12px;
      padding:.7rem .9rem; margin:.25rem 0 .9rem;
      font-size:.95rem; color:var(--muted);
    }
    #a7 .help ul{ margin:.4rem 0 0 1.2rem }

    /* sections */
    #a7 .section{ margin:10px 0 18px }
    #a7 .section h2{ margin:0 0 8px; font-size:1.05rem }
    #a7 .section .hint{ font-size:.85rem; opacity:.75; margin-left:.5rem }

    /* grid rows */
    #a7 .row{ display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(var(--slot-w),1fr)); }
    /* desktop: force 7 across, then wrap below 1100px */
    @media (min-width:1100px){
      #a7 .row.tableau{ grid-template-columns: repeat(7, minmax(var(--slot-w),1fr)); }
    }

    /* dashed slots */
    #a7 .slot{
      position:relative; min-height:var(--slot-h);
      border:2px dashed var(--slot-dash); border-radius:14px; padding:8px; overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 40%), var(--surface);
    }
    #a7 .slot .slot-name{ position:absolute; top:8px; left:10px; font-size:.85rem; opacity:.85 }
    #a7 .slot.highlight{ box-shadow:0 0 0 3px rgba(150,160,255,.28) inset }

    /* piles never grow; cards cascade inside */
    #a7 .slot.pile{ position:relative; height:480px; overflow:hidden; }

    /* absolute layout for cascades */
    #a7 #tableau .card-tile,
    #a7 .slot[data-role="foundation"] .card-tile{
      position:absolute; left:10px; right:10px; width:auto;
      transition: calc(.18s * var(--anim)) top ease, calc(.18s * var(--anim)) transform ease;
      will-change: top, transform;
    }

    /* === FOUNDATIONS (fixed: no overflow outside; gentle peeking) === */
    #a7 .slot[data-role="foundation"]{
      height:280px;
      overflow:hidden;               /* keep stacks inside the slot */
    }
    /* Top label */
    #a7 .pile[data-role="foundation"]::after{
      content: attr(data-top);
      position:absolute; top:8px; right:10px; font-size:.85rem; opacity:.65;
    }
    /* faint suit tag */
    #a7 .slot[data-role="foundation"]::before{
      content: attr(data-suitname);
      position:absolute; bottom:6px; left:10px; font-weight:800; font-size:.78rem; opacity:.55;
      color: var(--muted);
    }
    /* layered look (small lift so borders don't merge) */
    #a7 .slot[data-role="foundation"] .card-tile{
      box-shadow: 0 2px 6px rgba(0,0,0,.18);
      transform: translateY(calc(var(--anim) * -1px));
    }
    /* slide-up animation class added from JS on drop */
    #a7 .slot[data-role="foundation"] .card-tile.rise{
      animation: a7-rise calc(.22s * var(--anim)) ease-out;
    }

    /* utilities show mini cards, fanned */
    #a7 #deckZone, #a7 #discardZone, #a7 #uC, #a7 #uD{ position:relative; }
    #a7 .card-tile.mini img{
      width: calc(var(--card-w) * .56);
      height: calc(var(--card-h) * .56);
    }
    #a7 #deckZone .card-tile, #a7 #discardZone .card-tile,
    #a7 #uC .card-tile, #a7 #uD .card-tile{
      position:absolute;
    }

    /* card visuals */
    #a7 .card-tile{ position:relative; display:inline-block; }
    #a7 .card-tile img{
      width: var(--card-w); height: var(--card-h);
      object-fit: contain; background:#fff; border-radius:12px;
      box-shadow:0 6px 16px rgba(0,0,0,.25);
    }
    #a7 .card-tile.dragging{ transform: scale(1.045); z-index: 40; }
    #a7 .card-tile.settle{ animation:a7-settle calc(.18s * var(--anim)) ease; }
    @keyframes a7-settle{ from { transform: scale(.985) } to { transform: scale(1) } }

    /* slide-up animation used on foundation drops */
    @keyframes a7-rise{
      from { transform: translateY(12px) scale(.985); opacity:.98; }
      to   { transform: translateY(0)     scale(1);    opacity:1;   }
    }

    /* corner label like “A♠” */
    #a7 .card-tile::after{
      content: attr(data-label);
      position:absolute; top:6px; left:8px;
      font: 800 11px/1 system-ui, sans-serif;
      background: rgba(255,255,255,.92);
      color:#111; border-radius:6px; padding:2px 6px;
      box-shadow: 0 1px 2px rgba(0,0,0,.25);
      pointer-events:none;
    }
    #a7 .card-tile img{ display:block; width:100%; height:auto; border-radius:10px; }

    /* motion toggle */
    #a7.no-anim{ --anim: 0; }

    /* win banner */
    #a7 #winBanner[hidden]{ display:none }
    #a7 #winBanner{
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:24px; padding:12px 16px; border-radius:10px;
      background:#10b981; color:#031020; font-weight:800;
      box-shadow:0 10px 30px rgba(0,0,0,.3); z-index:9999
    }

    /* responsive tweak */
    @media (max-width:680px){
      #a7{ --slot-w: 148px; --slot-h: 200px; --card-w: 118px; --card-h: 160px; }
    }
  </style>
</head>

<body>
  <a class="skip" href="#main">Skip to content</a>

  <!-- Header -->
  <header class="site-header">
    <div class="wrap">
      <a class="brand" href="index.html" aria-label="GASH IT Solutions home">
        <img src="assets/logo.svg" alt="GASH IT Solutions logo" width="56" height="56">
      </a>
      <nav aria-label="Primary">
        <button id="navToggle" class="nav__toggle" aria-expanded="false" aria-controls="navMenu">Menu</button>
        <ul id="navMenu" class="nav__menu">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="purpose.html" aria-current="page">Purpose &amp; Assignments</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Banner -->
  <section class="page-banner">
    <div class="wrap">
      <p class="crumb"><a href="purpose.html">← Back to Purpose &amp; Assignments</a></p>
      <h1 class="gradient-text">A7 — Drag &amp; Drop (Cards)</h1>
    </div>
  </section>

  <!-- Main -->
  <main id="main" class="wrap">
    <section id="a7" aria-label="Assignment 7 Drag and Drop Game">
      <div class="game-area">

        <!-- Instructions -->
        <div class="help">
          <strong>How to play</strong>
          <ul>
            <li><b>Goal:</b> Build each <b>Foundation</b> from <b>A → K</b> by suit.</li>
            <li>Drag a card onto a Foundation with the <b>same suit</b> and the <b>next rank</b> (e.g., 2♠ onto A♠).</li>
            <li>Use the <b>Tableau</b> to reorder; <b>Utility Stacks</b> are scratch parking.</li>
            <li>Double-click a card to try auto-sending it to its Foundation.</li>
          </ul>
        </div>

        <!-- Controls -->
        <div class="control-bar" role="toolbar" aria-label="Game controls">
          <button id="dealBtn">Deal</button>
          <button id="drawBtn">Draw 1</button>
          <button id="resetBtn">Reset</button>
          <span style="flex:0 0 12px"></span>
          <button id="autoOneBtn">Auto-move 1</button>
          <button id="autoSomeBtn">Auto-move 5</button>
          <button id="autoAllBtn">Auto-move All</button>
          <button id="sendRunsBtn">Send Completed Suit</button>
          <label class="toggle" title="Turn animations on/off">
            <input type="checkbox" id="animToggle" checked> Animations
          </label>
          <span id="status" style="margin-left:auto;opacity:.85">Ready.</span>
          <span id="liveRegion" class="sr-only" aria-live="polite"></span>
        </div>

        <!-- Tableau -->
        <div class="section">
          <h2>Tableau</h2>
          <div id="tableau" class="row tableau">
            <div class="slot pile" data-role="tableau" id="pile-1"><span class="slot-name">Pile 1</span></div>
            <div class="slot pile" data-role="tableau" id="pile-2"><span class="slot-name">Pile 2</span></div>
            <div class="slot pile" data-role="tableau" id="pile-3"><span class="slot-name">Pile 3</span></div>
            <div class="slot pile" data-role="tableau" id="pile-4"><span class="slot-name">Pile 4</span></div>
            <div class="slot pile" data-role="tableau" id="pile-5"><span class="slot-name">Pile 5</span></div>
            <div class="slot pile" data-role="tableau" id="pile-6"><span class="slot-name">Pile 6</span></div>
            <div class="slot pile" data-role="tableau" id="pile-7"><span class="slot-name">Pile 7</span></div>
          </div>
        </div>

        <!-- Foundations -->
        <div class="section">
          <h2>Foundations <span class="hint">(A→K by suit)</span></h2>
          <div class="row">
            <div class="slot pile" data-role="foundation" data-suit="S" data-suitname="Spades (A→K)" id="fS"><span class="slot-name">Spades (A→K)</span></div>
            <div class="slot pile" data-role="foundation" data-suit="H" data-suitname="Hearts (A→K)" id="fH"><span class="slot-name">Hearts (A→K)</span></div>
            <div class="slot pile" data-role="foundation" data-suit="D" data-suitname="Diamonds (A→K)" id="fD"><span class="slot-name">Diamonds (A→K)</span></div>
            <div class="slot pile" data-role="foundation" data-suit="C" data-suitname="Clubs (A→K)" id="fC"><span class="slot-name">Clubs (A→K)</span></div>
          </div>
        </div>

        <!-- Utility Stacks -->
        <div class="section">
          <h2>Utility Stacks <span class="hint">Temporary parking to re-order cards.</span></h2>
          <div class="row">
            <div class="slot" id="deckZone"><span class="slot-name">Utility A</span></div>
            <div class="slot" id="discardZone"><span class="slot-name">Utility B</span></div>
            <div class="slot" id="uC"><span class="slot-name">Utility C</span></div>
            <div class="slot" id="uD"><span class="slot-name">Utility D</span></div>
          </div>
        </div>
      </div>

      <!-- Win banner -->
      <div id="winBanner" hidden>
        🎉 You win! All foundations complete.
        <button id="playAgainBtn" style="margin-left:10px">Play again</button>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="wrap footer__grid">
      <small>
        <strong>Created by Ginelle Harvey</strong> • <span class="js-year"></span><br>
        Got a project or question? Say hello at:
        <a href="mailto:info@gashitsolutions.com">info@gashitsolutions.com</a>
      </small>
      <nav class="footer-nav" aria-label="Footer">
        <a href="purpose.html">← Back to Purpose &amp; Assignments</a>
      </nav>
    </div>
  </footer>

  <!-- Site JS -->
  <script src="script.js"></script>

  <!-- Game Logic -->
  <script src="A7-dragdrop.js"></script>

  <!-- drag visual helper -->
  <script>
    document.addEventListener('dragstart', e => {
      const t = e.target.closest('#a7 .card-tile'); if (t) t.classList.add('dragging');
    });
    document.addEventListener('dragend', () => {
      document.querySelectorAll('#a7 .card-tile.dragging').forEach(n=>n.classList.remove('dragging'));
    });
    document.addEventListener('drop', () => {
      document.querySelectorAll('#a7 .card-tile.dragging').forEach(n=>n.classList.remove('dragging'));
    });

    /* animation toggle */
    document.addEventListener('DOMContentLoaded', ()=>{
      const root = document.getElementById('a7');
      const cb = document.getElementById('animToggle');
      if (cb && root){
        cb.addEventListener('change', ()=> root.classList.toggle('no-anim', !cb.checked));
      }
    });
  </script>
</body>
</html>
