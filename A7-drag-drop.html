<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A7 — Drag & Drop (Cards)</title>
  <meta name="description" content="Assignment 7: HTML5 drag-and-drop with cards, foundations, tableau, and utility stacks.">

  <!-- Your site theme (you shared this file) -->
  <link rel="stylesheet" href="style.css">

  <!-- Favicons (same set you use) -->
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="assets/favicon-48x48.png">
  <link rel="icon" type="image/png" sizes="64x64" href="assets/favicon-64x64.png">
  <link rel="icon" type="image/png" sizes="128x128" href="assets/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="512x512" href="assets/favicon-512.png">
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">

  <!-- ===== A7 SCOPED styles (built on your tokens) ===== -->
  <style>
    /* Use your site tokens (var(--surface), --border, etc.) */
    #a7{
      --slot-w: 220px;         /* slot width */
      --slot-h: 260px;         /* slot height */
      --card-w: 180px;         /* card width */
      --card-h: 240px;         /* card height (3:4) */
      --fan: 22px;             /* tableau spacing */
      --f-fan: 18px;           /* foundation spacing */
      --slot-border: var(--border);
      --slot-bg: var(--surface);
      --slot-dash: #9ea3ff80;
    }

    /* Center banner like A6 (your .wrap already centers) */
    .page-banner .wrap { text-align:center; }

    /* Game container card */
    #a7 .game-area{
      background: var(--surface);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:16px;
    }

    /* Controls */
    #a7 .control-bar{ display:flex; flex-wrap:wrap; gap:10px; margin:0 0 10px }
    #a7 .control-bar button{
      background: var(--surface-2);
      color: var(--text);
      border:1px solid var(--slot-border);
      padding:8px 12px; border-radius:12px; font-weight:700; cursor:pointer;
    }
    #a7 .control-bar button:hover{ filter:brightness(1.08) }

    /* Instructions */
    #a7 .help{
      background: var(--surface-2);
      border:1px solid var(--slot-border);
      border-radius:12px;
      padding:.8rem 1rem; margin:.25rem 0 1rem;
      font-size:.95rem; color:var(--muted);
    }
    #a7 .help ul{ margin:.4rem 0 0 1.2rem }

    /* Sections and rows */
    #a7 .section{ margin:10px 0 20px }
    #a7 .section h2{ margin:0 0 8px; font-size:1.05rem }
    #a7 .section .hint{ font-size:.85rem; opacity:.75; margin-left:.5rem }

    /* Grid rows — never overflow page; tableau has 7 but wraps safely */
    #a7 .row{ display:grid; gap:14px; grid-template-columns:repeat(auto-fit, minmax(var(--slot-w),1fr)); }
    #a7 .row.tableau{ grid-template-columns:repeat(7, minmax(var(--slot-w),1fr)); }

    /* Slots */
    #a7 .slot{
      position:relative; min-height:var(--slot-h);
      border:2px dashed var(--slot-dash); border-radius:16px; padding:8px; overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 40%), var(--surface);
    }
    #a7 .slot .slot-name{ position:absolute; top:8px; left:10px; font-size:.85rem; opacity:.85 }
    #a7 .slot.highlight{ box-shadow:0 0 0 3px rgba(150,160,255,.25) inset }

    /* Cards (no squish, 3:4; smoother drag/drop) */
    #a7 .card-tile{ position:relative; display:inline-block; transition: transform .18s ease, box-shadow .18s ease; }
    #a7 .card-tile img{
      width:var(--card-w); height:var(--card-h);
      object-fit: contain; background:#fff; border-radius:14px;
      box-shadow:0 8px 20px rgba(0,0,0,.25);
    }
    #a7 .card-tile.mini img{ width:calc(var(--card-w) * .53); height:calc(var(--card-h) * .53) }
    #a7 .card-tile.dragging{ transform: scale(1.045); z-index: 40; }
    #a7 .card-tile.settle{ animation:a7-settle .18s ease; }
    @keyframes a7-settle{ from { transform: scale(.98) } to { transform: scale(1) } }

    /* Tableau cascade */
    #a7 .pile[data-role="tableau"] .card-tile{ position:relative; display:block; margin-top:var(--fan) }
    #a7 .pile[data-role="tableau"] .card-tile:first-child{ margin-top:0 }

    /* Foundations: named left, cascade visible, show Top: on right */
    #a7 .pile[data-role="foundation"] .card-tile{ position:relative; display:block; margin-top:var(--f-fan) }
    #a7 .pile[data-role="foundation"] .card-tile:first-child{ margin-top: 28px }
    #a7 .pile[data-role="foundation"]::after{
      content: attr(data-top);
      position:absolute; top:8px; right:10px; font-size:.85rem; opacity:.6;
    }

    /* Win banner */
    #a7 #winBanner[hidden]{ display:none }
    #a7 #winBanner{
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:24px; padding:14px 18px; border-radius:12px;
      background:#10b981; color:#031020; font-weight:800;
      box-shadow:0 10px 30px rgba(0,0,0,.3); z-index:9999
    }

    /* Responsive: gently scale down so 7 piles usually fit without horizontal scroll */
    @media (max-width:1200px){
      #a7{ --slot-w: 200px; --slot-h: 240px; --card-w: 164px; --card-h: 218px; --fan: 20px; --f-fan: 16px; }
    }
    @media (max-width:980px){
      #a7{ --slot-w: 180px; --slot-h: 220px; --card-w: 150px; --card-h: 200px; --fan: 18px; --f-fan: 14px; }
      #a7 .row.tableau{ grid-template-columns:repeat(4, minmax(var(--slot-w),1fr)); }
    }
    @media (max-width:680px){
      #a7{ --slot-w: 160px; --slot-h: 200px; --card-w: 132px; --card-h: 176px; --fan: 16px; --f-fan: 12px; }
      #a7 .row.tableau{ grid-template-columns:repeat(2, minmax(var(--slot-w),1fr)); }
    }

    /* ===== A7: Keep piles from growing; cascade cards inside ===== */
#a7 .slot.pile {
  position: relative;          /* allow absolute children */
  height: 520px;               /* fixed visual height for a column */
  overflow: hidden;            /* nothing hangs out */
}

/* cards inside tableau (columns) */
#a7 #tableau .card-tile {
  position: absolute;          /* we’ll lay them out with JS */
  left: 12px;
  right: 12px;                 /* keeps them neatly inside the dashed border */
  width: auto;
  transition: transform .18s ease, top .18s ease; /* smooth moves */
}

/* cards inside foundations (small cascade) */
#a7 [data-role="foundation"] .card-tile {
  position: absolute;
  left: 12px;
  right: 12px;
}

/* subtle “pop” when a card settles */
#a7 .card-tile.settle {
  transform: scale(1.02);
}

/* make sure images themselves don’t overflow */
#a7 .card-tile img {
  display: block;
  width: 100%;
  height: auto;
  border-radius: 10px;
}
    
</style>
</head>

<body>
  <a class="skip" href="#main">Skip to content</a>

  <!-- Site Header -->
  <header class="site-header">
    <div class="wrap">
      <a class="brand" href="index.html" aria-label="GASH IT Solutions home">
        <img src="assets/logo.svg" alt="GASH IT Solutions logo" width="56" height="56">
      </a>
      <nav aria-label="Primary">
        <button id="navToggle" class="nav__toggle" aria-expanded="false" aria-controls="navMenu">Menu</button>
        <ul id="navMenu" class="nav__menu">
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="purpose.html" aria-current="page">Purpose &amp; Assignments</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Centered banner like A6 -->
  <section class="page-banner">
    <div class="wrap">
      <p class="crumb"><a href="purpose.html">← Back to Purpose &amp; Assignments</a></p>
      <h1 class="gradient-text">A7 — Drag &amp; Drop (Cards)</h1>
    </div>
  </section>

  <!-- Main -->
  <main id="main" class="wrap">
    <section id="a7" aria-label="Assignment 7 Drag and Drop Game">
      <div class="game-area">

        <!-- Instructions -->
        <div class="help">
          <strong>How to play</strong>
          <ul>
            <li><b>Goal:</b> Build each <b>Foundation</b> from <b>A → K</b> by suit (Spades, Hearts, Diamonds, Clubs).</li>
            <li>Drag a card onto a Foundation with the <b>same suit</b> and the <b>next rank</b> (e.g., 2♠ onto A♠).</li>
            <li>Use the <b>Tableau</b> to reorder; <b>Utility Stacks</b> are scratch parking.</li>
            <li>Double-click a card to try auto-sending it to its Foundation.</li>
            <li>Buttons: <b>Auto-move 1</b>, <b>Auto-move 5</b>, <b>Auto-move All</b>, or <b>Send Completed Suit</b>.</li>
          </ul>
        </div>

        <!-- Controls -->
        <div class="control-bar" role="toolbar" aria-label="Game controls">
          <button id="dealBtn" title="Deal a new game">Deal</button>
          <button id="drawBtn" title="Draw one to a random pile">Draw 1</button>
          <button id="resetBtn" title="Clear the table">Reset</button>

          <span style="flex:0 0 12px"></span>

          <button id="autoOneBtn" title="Send one eligible card to its foundation">Auto-move 1</button>
          <button id="autoSomeBtn" title="Send a few eligible cards (5)">Auto-move 5</button>
          <button id="autoAllBtn" title="Keep sending any eligible cards">Auto-move All</button>
          <button id="sendRunsBtn" title="If a tableau pile is a complete A→K run, move it">Send Completed Suit</button>

          <span id="status" style="margin-left:auto;opacity:.85">Ready.</span>
          <span id="liveRegion" class="sr-only" aria-live="polite"></span>
        </div>

        <!-- Tableau -->
        <div class="section">
          <h2>Tableau</h2>
          <div id="tableau" class="row tableau">
            <div class="slot pile" data-role="tableau" id="pile-1"><span class="slot-name">Pile 1</span></div>
            <div class="slot pile" data-role="tableau" id="pile-2"><span class="slot-name">Pile 2</span></div>
            <div class="slot pile" data-role="tableau" id="pile-3"><span class="slot-name">Pile 3</span></div>
            <div class="slot pile" data-role="tableau" id="pile-4"><span class="slot-name">Pile 4</span></div>
            <div class="slot pile" data-role="tableau" id="pile-5"><span class="slot-name">Pile 5</span></div>
            <div class="slot pile" data-role="tableau" id="pile-6"><span class="slot-name">Pile 6</span></div>
            <div class="slot pile" data-role="tableau" id="pile-7"><span class="slot-name">Pile 7</span></div>
          </div>
        </div>

        <!-- Foundations (named & cascading) -->
        <div class="section">
          <h2>Foundations <span class="hint">(A→K by suit)</span></h2>
          <div class="row">
            <div class="slot pile" data-role="foundation" data-suit="S" id="fS"><span class="slot-name">Foundation — Spades</span></div>
            <div class="slot pile" data-role="foundation" data-suit="H" id="fH"><span class="slot-name">Foundation — Hearts</span></div>
            <div class="slot pile" data-role="foundation" data-suit="D" id="fD"><span class="slot-name">Foundation — Diamonds</span></div>
            <div class="slot pile" data-role="foundation" data-suit="C" id="fC"><span class="slot-name">Foundation — Clubs</span></div>
          </div>
        </div>

        <!-- Utility Stacks -->
        <div class="section">
          <h2>Utility Stacks <span class="hint">Temporary parking to re-order cards.</span></h2>
          <div class="row">
            <div class="slot" id="deckZone"><span class="slot-name">Utility A</span><div id="deckStack"></div></div>
            <div class="slot" id="discardZone"><span class="slot-name">Utility B</span><div id="discardStack"></div></div>
            <div class="slot" id="uC"><span class="slot-name">Utility C</span></div>
            <div class="slot" id="uD"><span class="slot-name">Utility D</span></div>
          </div>
        </div>
      </div>

      <!-- Win banner (no popup). Shown when all foundations have 13 cards -->
      <div id="winBanner" hidden>
        🎉 You win! All foundations complete.
        <button id="playAgainBtn" style="margin-left:10px">Play again</button>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="wrap footer__grid">
      <small>
        <strong>Created by Ginelle Harvey</strong> • <span class="js-year"></span><br>
        Got a project or question? Say hello at:
        <a href="mailto:info@gashitsolutions.com">info@gashitsolutions.com</a>
      </small>
      <nav class="footer-nav" aria-label="Footer">
        <a href="purpose.html">← Back to Purpose &amp; Assignments</a>
      </nav>
    </div>
  </footer>

 <!-- Site script -->
<script src="script.js"></script>

<!-- A7 Game Logic -->
<script src="A7-dragdrop.js"></script>

  
  <!-- small helper to add drag visual class -->
  <script>
    document.addEventListener('dragstart', e => {
      const t = e.target.closest('#a7 .card-tile'); if (t) t.classList.add('dragging');
    });
    document.addEventListener('dragend', () => {
      document.querySelectorAll('#a7 .card-tile.dragging').forEach(n=>n.classList.remove('dragging'));
    });
    document.addEventListener('drop', () => {
      document.querySelectorAll('#a7 .card-tile.dragging').forEach(n=>n.classList.remove('dragging'));
    });
  </script>
</body>
</html>
